---
layout: post
title:  "Day21 AJAX(二)"
date:   2017-06-21
categories: 《JavaScript高级程序设计》笔记
spend: 2h
excerpt: ""
---
#### 一、跨域技术
##### 1.图片Ping
动态的创建图像Ping，使用它们的`onload`和`onerror`事件处理程序来确定是否接收到了响应。该方法的特点是:
* 简单(通过查询字符串的形式发送数据)
* 单向(只能发GET请求，不能处理服务器响应)
请求从给`Image`对象设置src属性的那一刻开始发送，常用于跟踪用户点击，做数据埋点。

##### 2.JSONP
它同图片Ping技术一样，也是利用`script`标签不受其它域加载资源限制的特点来完成的，但是`script`的特点在于加载到的脚本会被浏览器执行，所以它是双向的，可以事先定义好一个函数，在返回响应里调用该函数，将需要处理的数据使用JSON格式作为函数参数调用，这就是JSONP的原理。  

缺点也很明显，由于是加载其它域的代码来执行，再不能保证所加载代码的安全性时，应用也就处于危险中。

