---
layout: post
title:  "网络基础 TCP/IP"
date:   2017-08-21
categories: 《图解 TCP/IP》
spend: 2h
excerpt: ""
---
#### 一、概念

计算机与网路设备之间的通信，需要基于相同的方法。不同设备、不同系统，使用的语言等，都需要事先确定规则，所定义的这一切规则就是协议。
> TCP/IP就是互联网相关的各类协议的总称，包含从电缆的规格到IP地址的选定方法、寻找异地用户的方法、双方建立通讯的顺序，以及Web页面显示需要处理的步骤等。 ———《图解 TCP/IP》  

#### 二、TCP/IP 的分层管理

分层设计，把一个整个细化为多个部分，便于修改，问题排查。

* 应用层: 决定了向用户提供应用服务时通信的活动。如FTP(文件传输协议)、DNS(域名系统)。HTTP协议也处于这一层。
* 传输层: 为应用层提供处于网路连接中的两台计算机之间的数据传输。如TCP(文本控制协议)、UDP(用户数据报协议)。
* 网络层: 处理网络上流动的数据包。数据包是网络传输的最小数据单位(所以为什么叫抓包，不是抓头上的包包)。该层规定了数据包传输路线的选定。
* 链路层: 处理链接网路的硬件部分。包括操作系统、设备驱动、网卡、光纤等所有的硬件范畴。

#### 三、TCP/IP的通信传输流

一张图可以解释。
![TCP/IP的通信传输流](http://navcd-1252873427.cosgz.myqcloud.com/head_img/TCP-IP%E4%BC%A0%E8%BE%93%E6%B5%81.png)

可以简单理解为是一个快递的运送过程:  
①卖家接收到订单，选定要快递的商品(应用层)  
②卖家包装商品，整理收件信息(传输层)  
③从顺丰、申通、韵达、天天等快递商家选定一家，联系小哥来取件或到门店寄件(网络层)  
④快递商家确定位置，走你(链路层)  
⑤商品到达目的地，选定负责该条线路的小哥配送(网络层)  
⑥小哥骑上电驴，嘟嘟嘟~(传输层)  
⑦收件，拆箱(应用层)

#### 四、IP、TCP和DNS
##### 1.IP
IP的协议的作用是确保数据能够传递给对方，需要满足两个重要条件。IP地址(节点被分配的地址)和MAC地址(网卡所属的固定地址)，IP地址可更换，MAC地址基本不会变(还是快递，收件人的电话号码和地址会变，但收件人的姓名基本不会变)。  
通过ARP协议可以用IP来查找到MAC地址，但一般的数据传输都需要经过多台计算机和网路设备才能连接到对方，所以是没有人能全面了解互联网中的传输状况。  
![ARP协议找寻MAC地址](http://navcd-1252873427.cosgz.myqcloud.com/head_img/ARP%E5%AF%BB%E5%9D%80MAC%E5%9C%B0%E5%9D%80.png)

##### 2.TCP
TCP协议位于传输层，它不仅在传递大数据时会把数据分割成小的数据包进行管理，而且还能够通过三次握手确认数据是否成功送达。  
握手过程会带有TCP特有的标志——SYN和ACK。  
![三次握手](http://navcd-1252873427.cosgz.myqcloud.com/head_img/%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B.png)

##### 3.DNS
DNS协议提供通过域名查找IP地址或反过来通过IP地址得到域名的服务。