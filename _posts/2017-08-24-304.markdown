---
layout: post
title:  "庖丁解牛 304"
date:   2017-08-24
categories: 《图解TCP-IP》
spend: 2h
excerpt: ""
---
HTTP状态码: `304`  

标识信息: `Not Modified`  

要完整地解释这个状态码的来龙去脉，首先得理解什么是缓存。  

##### 1.缓存
在Web应用中，资源大多是从源服务器上来获取，特别是对于静态资源这类不大会变化的资源来说，如果每次请求源服务器都返回相同的静态资源，这对于追求舒坦的程序员来说，太痛苦了。  

册那！每次都要开车走30公里到厂家去拿货，如果马路对面的经销商就有该多好~  

因此提出了缓存技术，不仅节约资源，还提升了页面加载速度。  

静态资源的缓存，根据缓存位置的不同，分为代理服务器缓存和客户端缓存，都减少了对源服务器的访问。那么，当服务器资源已更新的时候，客户端又该如何拿到最新的资源?  

##### 2.IF-Modified-Since
在HTTP请求头里，可以为字段`IF-Modified-Since`添加一个时间值，用来确认代理或客户端拥有的本地资源的有效性。  

服务器收到请求后，会比较资源的更新时间，如果`IF-Modified-Since`字段值在资源更新时间之前，则接受请求，返回最新资源；如果资源更新时间在`IF-Modified-Since`字段值之后，表明请求的资源没有更新过，返回状态码304响应。
![304](http://navcd-1252873427.cosgz.myqcloud.com/head_img/304.png)

获取资源的最新更新时间，可以查看首部字段`Last-Modified`。